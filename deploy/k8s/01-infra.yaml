apiVersion: apps/v1
kind: Deployment
metadata: {name: redis, namespace: default}
spec:
  replicas: 1
  selector: {matchLabels: {app: redis}}
  template:
    metadata: {labels: {app: redis}}
    spec:
      containers: [{name: redis, image: redis:alpine, ports: [{containerPort: 6379}]}]
---
apiVersion: v1
kind: Service
metadata: {name: redis, namespace: default}
spec: {ports: [{port: 6379}], selector: {app: redis}}
---
apiVersion: apps/v1
kind: Deployment
metadata: {name: minio, namespace: default}
spec:
  replicas: 1
  selector: {matchLabels: {app: minio}}
  template:
    metadata: {labels: {app: minio}}
    spec:
      containers:
      - name: minio
        image: minio/minio
        args: ["server", "/data", "--console-address", ":9001"]
        ports: [{containerPort: 9000}, {containerPort: 9001}]
        env:
        - {name: MINIO_ROOT_USER, value: "minioadmin"}
        - {name: MINIO_ROOT_PASSWORD, value: "minioadmin"}
---
apiVersion: v1
kind: Service
metadata: {name: minio, namespace: default}
spec:
  ports: [{port: 9000, name: api}, {port: 9001, name: console}]
  selector: {app: minio}